class Stiva{constructor(t={},s){this.stores=t,this.context=s||new EventTarget}update(t,s){let e=s(this.stores[t]);this.stores[t]=e,this.dispatch(t)}dispatch(t){this.context.dispatchEvent(new CustomEvent(`stiva-${t}`,{detail:this.stores[t]}))}dispatchAll(){Object.keys(this.stores).forEach(t=>this.dispatch(t))}listen(t,s){this.context.addEventListener(t,s)}}